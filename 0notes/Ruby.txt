–í Ruby –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–∑—ã–≤–∞—Ç—å Rust (–∏–ª–∏ C/C++) –∫–æ–¥ –∫–∞–∫ —Ä–æ–¥–Ω—ã–µ Ruby-–º–æ–¥—É–ª–∏, –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ PyO3 –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –¥–ª—è Python
## ü¶Ä –ê–Ω–∞–ª–æ–≥–∏ PyO3 –¥–ª—è Ruby

–í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
rutie - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å Ruby-–º–æ–¥—É–ª–∏ –Ω–∞ Rust  –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π   |
magnus - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ rutie, –±–æ–ª–µ–µ Rust-–∏–¥–∏–æ–º–∞—Ç–∏—á–Ω–∞—è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è 
---
–ü—Ä–∏–º–µ—Ä: ‚Äú–ü—Ä–∏–≤–µ—Ç, –í–∞—Å—è‚Äù —Å magnus
1. –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–µ–∫—Ç
```bash
cargo new --lib hello_ruby
cd hello_ruby
```
2. –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º Cargo.toml
```toml
[package]
name = "hello_ruby"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]

[dependencies]
magnus = "0.6"
```
3. –ü–∏—à–µ–º –∫–æ–¥ src/lib.rs
```rust
use magnus::{define_module, function, prelude::*};

fn hello(name: String) -> String {
    format!("–ü—Ä–∏–≤–µ—Ç, {}! ü¶Ä", name)
}

#[magnus::init]
fn init() -> Result<(), magnus::Error> {
    let module = define_module("HelloRuby")?;
    module.define_singleton_method("hello", function!(hello, 1))?;
    Ok(())
}
```
4. –°–æ–±–∏—Ä–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
```bash
cargo build --release
```
–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø–æ–ª—É—á–∏—à—å —Ñ–∞–π–ª –≤—Ä–æ–¥–µ:
```
target/release/libhello_ruby.so
```
–ü–µ—Ä–µ–∏–º–µ–Ω—É–π –µ–≥–æ –≤ `hello_ruby.so` (Ruby –æ–∂–∏–¥–∞–µ—Ç –∏–º—è –±–µ–∑ lib)
---
5. –ü–æ–¥–∫–ª—é—á–∞–µ–º –∏–∑ Ruby
–°–æ–∑–¥–∞–π —Ä—è–¥–æ–º test.rb:
```ruby
require_relative './hello_ruby.so'

puts HelloRuby.hello("–í–∞—Å—è")
```
```bash
ruby test.rb
```
```
–ü—Ä–∏–≤–µ—Ç, –í–∞—Å—è! ü¶Ä
```
---
–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- Rust-–∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (.so/.bundle/.dll)
- –ø—Ä–∏ require Ruby –≤—ã–∑—ã–≤–∞–µ—Ç Init_hello_ruby() (—Å–æ–∑–¥–∞–Ω–Ω—É—é –º–∞–∫—Ä–æ—Å–æ–º #[magnus::init])
- Rust —á–µ—Ä–µ–∑ magnus —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Ruby VM

---

## üß† –ö–æ–≥–¥–∞ —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω–æ

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Rust –≤ Ruby –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –∫–æ–≥–¥–∞:

* –Ω—É–∂–Ω–æ **—É—Å–∫–æ—Ä–∏—Ç—å —Ç—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è, –ø–∞—Ä—Å–∏–Ω–≥, ML);
* –Ω—É–∂–Ω–æ **—Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞–º—è—Ç—å—é –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏**;
* —Ö–æ—á–µ—Ç—Å—è –ø–∏—Å–∞—Ç—å **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**, –Ω–æ –±–µ–∑ –±–æ–ª–∏ C API.

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä ‚Äî –≥–¥–µ Rust –ø—Ä–∏–Ω–∏–º–∞–µ—Ç **–º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª –∏–∑ Ruby**, —Å—É–º–º–∏—Ä—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ?
