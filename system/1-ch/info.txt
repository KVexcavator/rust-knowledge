Глава 1. Инструменты для работы – цепочки инструментов Rust и структуры проектов
---
rustc --version
cargo --version
---
Rust позволяет создавать различные типы двоичных файлов – отдельные исполняемые файлы, статические библиотеки и динамические библиотеки.
---
Всегда разрабатываются три релиза(канала выпуска) Rust, стабильный, бета-версия и ночной.
Большинство разработчиков Rust в основном используют стабильный канал. Выпуски бета-канала используются неактивно, а только для тестирования регрессий в версиях языка Rust. Ночной канал предназначен для активной разработки языка и публикуется каждую ночь.
Пользователь, который хочет использовать передовую функцию в ночной версии, должен снабдить код соответствующим флагом функции, например:
#![feature(try_trait)]
Для установки ночной версии Rust
rustup toolchain install nightly
Чтобы активировать ночную версию Rust
rustup default nightly
Для ночной активации на уровне каталога
rustup override set nightly
Чтобы получить версию компилятора в ночном Rust
rustup run nightly rustc –-version
Чтобы сбросить Rustup и использовать стабильный канал
rustup default stable
Чтобы показать установленные цепочки инструментов и те, которые в данный момент активны
rustup show
Для обновления установленных наборов инструментов до последних версий
rustup update
---
Выбор типа проекта Rust
В Rust существует два основных типа проектов: библиотеки и исполняемые файлы (или бинарные файлы).
Библиотека — это самостоятельный фрагмент кода, предназначенный для использования другими программами.
Двоичный файл — это автономный исполняемый файл, который может загружать и компоновать другие библиотеки в единый двоичный файл. Тип проекта двоичного файла также называется двоичным контейнером (или bin-контейнером). Выполнение программы для bin-контейнера начинается в функции main(), которая присутствует в файле src/main.rs.
---
Cargo — это инструмент для создания базовой структуры проекта для нового проекта Rust
- Наименьшая автономная единица организации кода в проекте Rust — это функция
- Следующий по высоте уровень организации кода — модуль. Код внутри модулей имеет своё собственное уникальное пространство имён. Модуль может содержать пользовательские типы данных (такие как структуры, трейты и перечисления), константы, псевдонимы типов, другие импортируемые модули и объявления функций. Модули могут быть вложены друг в друга. Несколько определений модулей могут быть определены в одном исходном файле для небольших проектов, или модуль может содержать код, распределённый по нескольким исходным файлам для более крупных проектов. Такой тип организации также называется модульной системой.
- Несколько модулей можно организовать в крейты. Крейты также служат единицей совместного использования кода в проектах Rust. Крейт — это либо библиотека, либо исполняемый файл. Крейт, разработанный одним разработчиком и опубликованный в публичном репозитории, может быть повторно использован другим разработчиком или командой. Корневой каталог крейта — это исходный файл, с которого запускается компилятор Rust. Для двоичных крейтов корневой каталог крейта — main.rs, а для библиотечных — lib.rs.
- В пакет можно объединить один или несколько контейнеров. Пакет содержит файл Cargo.toml, содержащий информацию о сборке пакета, включая загрузку и компоновку зависимых контейнеров. При использовании Cargo для создания нового проекта Rust создается пакет. Пакет должен содержать как минимум один контейнер – либо библиотеку, либо двоичный контейнер. Пакет может содержать любое количество двоичных контейнеров, но может содержать либо ноль, либо только один библиотечный контейнер.
---